     H
     FEMPFILE   IP   E           K DISK
     FEMPPRT    O    E             PRINTER OFLIND(*IN11)
     d depno           S              3a
     d depname         S             30a
     d depcost         S              5a

       /free

          //Set SQL options
       exec sql
        SET OPTION commit=*none;



       //Read more than one record from the SQL table
       //Declare the cursor
         exec sql
        Declare C1 cursor for
          Select ddepno, depname, depcost
                  from fakhir/depfile where ddepno = :depno;
       //Open the cursor
         exec sql
          Open C1;

        //Fetch data in a loop
        Dou sqlcod <> 0;
          exec sql
          Fetch C1 INTO :depno, :depname,  :depcost ;

         If (sqlcod <> 0);
          Leave;
        Endif;

        //  dsply depno  ;
        //  dsply empname;
           dsply depcost;
            dsply depname;
        //  dsply Datads;
        Enddo;

         //Close the cursor
         exec sql
          Close C1;


        /end-free
     C                   eval      FDATE = %DATE()
     C                   eval      FTIME= %TIME()
     C     *IN03         DOWEQ     '0'
     C                   write     Header1
C    C                   write     header2
     C                   seton                                        03
     C                   ENDDO
     C     *IN11         IFeq      *ON
     C                   write     header1
     C                   write     header2
     C                   endif
     C                   write     detail
     C     depcost       dsply
     C     depname       dsply
